<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formatador de ONU</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    textarea {
      width: 300px;
      height: 10px;
    }
    .popup {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #4CAF50;
      color: white;
      padding: 10px;
      border-radius: 5px;
      display: none;
    }
    .bottom-button {
      margin-top: 30px;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #history {
      margin-top: 20px;
      background: #f5f5f5;
      padding: 15px;
      border-radius: 5px;
    }
    .history-item {
      opacity: 0;
      animation: fadeIn 0.5s forwards;
      border-bottom: 1px solid #ccc;
      padding: 5px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }
    .history-item span {
      flex-grow: 1;
      transition: all 0.3s ease;
    }
    .history-item:hover {
      background-color: #e6f7ff;
      transform: translateX(5px);
    }
    .history-item:hover span {
      font-weight: bold;
    }
    .history-item:last-child {
      border-bottom: none;
    }
    .copy-btn {
      margin-left: 15px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .history-item:hover .copy-btn {
      opacity: 1;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
<section class="section">
  <div class="container">
    <h1 class="title">Formatador de ONU</h1>
    <div class="field">
      <label class="label">Insira os dados da ONU</label>
      <div class="control" id="inputControl">
        <textarea id="inputData" class="textarea textarea has-fixed-size is-link" placeholder="Cole os dados aqui..."></textarea>
      </div>
    </div>
    <div class="field mt-4">
      <label class="label">Resultado</label>
      <div class="control" id="outputControl">
        <textarea id="outputData" class="textarea textarea has-fixed-size is-link" readonly></textarea>
      </div>
    </div>
    <div class="control mt-2">
      <button id="copyButton" class="button is-info" onclick="handleCopy();" disabled>
        <i class="fas fa-copy" style="color: blue;"></i> Copiar
      </button>
    </div>
    <div id="popup" class="popup">Copiado para a área de transferência!</div>
    <div id="history" class="box">
      <h2 class="subtitle">Histórico</h2>
      <ul id="historyList"></ul>
      <button class="button is-danger mt-3" onclick="clearHistory()">Apagar Histórico</button>
    </div>
    <div class="bottom-button">
      <button class="button is-medium" style="background-color: #041461; color: white;" onclick="voltar()">
        <i class="fas fa-arrow-left"></i> Voltar
      </button>
    </div>
  </div>
</section>
<script>
  function handleCopy() {
    const inputData = document.getElementById('inputData');
    const outputData = document.getElementById('outputData');
    const inputControl = document.getElementById('inputControl');
    const outputControl = document.getElementById('outputControl');

    inputData.disabled = true;
    inputControl.classList.add('is-loading');
    outputControl.classList.add('is-loading');

    setTimeout(() => {
      copyOutput();
      saveOutputToHistory();

      outputControl.classList.remove('is-loading');
      outputControl.classList.add('has-icons-left', 'has-icons-right');
      outputData.classList.add('is-success');

      setTimeout(() => {
        inputControl.classList.remove('is-loading');
        outputControl.classList.remove('has-icons-left', 'has-icons-right');
        outputData.classList.remove('is-success');
        inputData.disabled = false;
        inputData.className = 'textarea';
        outputData.className = 'textarea';
      }, 2000);

    }, 800);
  }

  // ... restante do script existente
</script>
</body>
</html>
